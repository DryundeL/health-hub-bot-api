# –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞ HealthHub Bot API

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (PRODUCT.md)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MVP —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
- UX flow –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–æ –≤–∏–∑–∏—Ç–∞ –∫ –≤—Ä–∞—á—É
- –ü—Ä–∏–º–µ—Ä—ã —Ñ—Ä–∞–∑ –≤ UI (–∑–∞–±–æ—Ç–∞, –ø–æ—Ä—è–¥–æ–∫, –º–æ—Ç–∏–≤–∞—Ü–∏—è, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ—Å—Ç—å)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ
- –≠—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ (v2, v3, v4)
- –ú–æ–¥–µ–ª—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ (freemium)

### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (ARCHITECTURE.md)
- –û–ø–∏—Å–∞–Ω–∏–µ DDD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤ (Domain, Application, Infrastructure, Presentation)
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- GraphQL API —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### 3. –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Golang

#### Domain Layer (DDD)
- ‚úÖ **User Domain**: entity, repository interface
- ‚úÖ **Symptom Domain**: entity, repository interface, errors
- ‚úÖ **Analysis Domain**: entity, repository interface
- ‚úÖ **Medication Domain**: entity, intake entity, repositories
- ‚úÖ **DoctorVisit Domain**: entity, report, repository interface, errors

#### Application Layer (Use Cases)
- ‚úÖ `CreateSymptomUseCase` ‚Äî –ø—Ä–∏–º–µ—Ä use case –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏–º–ø—Ç–æ–º–∞
- ‚úÖ `GenerateReportUseCase` ‚Äî use case –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞ –∫ –≤—Ä–∞—á—É

#### Presentation Layer (GraphQL)
- ‚úÖ GraphQL —Å—Ö–µ–º–∞ (`graphql/schema.graphql`)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ resolvers
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è gqlgen

#### Infrastructure
- ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –ë–î
- ‚úÖ Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ README.md ‚Äî –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ QUICKSTART.md ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –±—ã—Å—Ç—Ä–æ–º—É —Å—Ç–∞—Ä—Ç—É
- ‚úÖ Makefile ‚Äî –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞–ª—å—à–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (MVP)
1. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** (`internal/infrastructure/repository/`)
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö repository interfaces —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GORM
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL

2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
   - Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Telegram WebApp `initData`
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `user.id` –∏–∑ –¥–∞–Ω–Ω—ã—Ö Telegram
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ user –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç GraphQL

3. **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (MVP)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ use cases

4. **GraphQL Resolvers**
   - –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö resolvers
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å use cases
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
5. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**
   - Cron job –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot API
   - –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤/–∞–Ω–∞–ª–∏–∑–æ–≤

6. **–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –æ—Ç—á—ë—Ç–∞ –¥–ª—è –≤–∏–∑–∏—Ç–∞ –∫ –≤—Ä–∞—á—É
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞

7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è domain entities
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è use cases
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
   - GraphQL —Ç–µ—Å—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3
8. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Structured logging (zap –∏–ª–∏ logrus)
   - –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)
   - Health check endpoints

9. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

10. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
    - Rate limiting
    - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection (GORM)
    - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### DDD (Domain-Driven Design)
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–æ–º–µ–Ω—ã
- Entities —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- Repositories –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ domain —Å–ª–æ–µ
- Use cases –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏

### GraphQL
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ gqlgen –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (Upload scalar)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- PostgreSQL –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- GORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ SQL —Ñ–∞–π–ª—ã
- Soft delete –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–î–æ–º–µ–Ω—ã**: 5 (User, Symptom, Analysis, Medication, DoctorVisit)
- **Entities**: 7
- **Repositories**: 6 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **Use Cases**: 2 –ø—Ä–∏–º–µ—Ä–∞
- **GraphQL —Ç–∏–ø—ã**: ~30+
- **SQL —Ç–∞–±–ª–∏—Ü**: 6
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 5

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å GORM
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram
3. –ó–∞–≤–µ—Ä—à–∏—Ç—å GraphQL resolvers
4. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π flow —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏–º–ø—Ç–æ–º–∞
6. –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
7. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç—á—ë—Ç–æ–≤

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [gqlgen –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://gqlgen.com/)
- [GORM –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://gorm.io/)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [DDD Patterns](https://martinfowler.com/bliki/DomainDrivenDesign.html)

---

**–°—Ç–∞—Ç—É—Å**: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

